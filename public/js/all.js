function _typeof(t){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_typeof(t)}var Confirmation=function(){var t=$("#confirmation-box"),e=$("#confirmation-text"),o=$("#yes-answer");return{confirmToDelete:function(r,a){o.data("form-id","#"+r.attr("id")),o.data("callback-function",(function(t,e){switch(e.status){case 422:Utility.displayErrorMessageBox(Object.values(e.responseJSON.errors).join("<br>"));break;case 200:if(e.hasOwnProperty("responseJSON")){var o=e.responseJSON;!0===o.success?(Utility.displaySuccessMessageBox(o.message),a.submit()):Utility.displayErrorMessageBox(o.message)}else Utility.displayJsonResponseError(e,t.attr("action"));break;default:Utility.displayUnknownError(e,t.attr("action"))}})),e.html(r.data("deletion-confirmation-message")+r.data("info")+"?"),t.modal()},initialize:function(){o.click((function(e){e.preventDefault(),t.modal("toggle"),Utility.submitForm($(o.data("form-id")),o.data("callback-function"))}))}}}(jQuery),Form=function(){var t=$(".submission-form"),e=$(".recaptcha-form"),o=$(".form-submit");return{initialize:function(){$("#join-form").click((function(t){window.console.log("test")})),t.submit((function(t){t.preventDefault(),Utility.submitForm($(this))})),e.submit((function(t){var e=this;t.preventDefault(),_submitEvent=function(){Utility.submitForm($(e))}})),o.on("click",(function(t){t.preventDefault(),$(this).closest("form").submit()})),Search.SearchForm.submit((function(t){t.preventDefault(),window.console.log("submit"),Search.submitForm($(this))})),Search.ResultDiv.on("submit",".deletion",(function(t){t.preventDefault(),Confirmation.confirmToDelete($(this),Search.SearchForm)})),$(".deletion").submit((function(t){t.preventDefault(),Confirmation.confirmToDelete($(this),Search.SearchForm)}))}}}(jQuery),Search=function(){var t=$("#search-result"),e=($("#give-result-box"),$("#receive-result-box"),$("#search-form"));$("#search-form-detail");function o(e){t.removeClass("alert"),Utility.submitForm(e,(function(e,o){switch(Utility.clearErrors(),o.status){case 422:Utility.displayInvalidInputs(o.responseJSON),t.html("");break;case 200:$("#content-list-box").empty(),$("#content-list-box").html(o.responseJSON.data),$(".gif-loader").hide(),$("input[name=search]").empty();break;default:var r=o.statusText;o.hasOwnProperty("responseJSON")&&o.responseJSON.hasOwnProperty("message")&&(r=o.responseJSON.message),t.html(Translator.translate("error")+" "+r).addClass("alert")}}))}return{ResultDiv:t,SearchForm:e,initialize:function(){t.on("click",".pagination a",(function(t){t.preventDefault();var e=document.createElement("form");e.setAttribute("method","GET"),e.setAttribute("action",$(this).attr("href")),o($(e))}))},submitForm:o}}(jQuery),Utility=function(){var t=$("#result-box"),e=$("#result-title"),o=$("#result-text");function r(r,a){i(),o.html(r),o.hasClass("alert")?a||(e.html(Translator.translate("utility.result.success")),o.removeClass("alert")):a&&(e.html(Translator.translate("utility.result.error")),o.addClass("alert")),t.modal()}function a(t){r(t,!1)}function n(t){r(t,!0)}function i(){$(":input").removeClass("error"),$(".alert.help-text").addClass("d-none")}function s(t){if(i(),t.hasOwnProperty("errors")){var e=0;for(var o in t.errors){var r=t.errors[o],a=/^[^.]+\.\d+$/.test(o)?o.replace(".",""):$('[name="'+o+'"]').attr("id"),n="object"===_typeof(r)?r[0]:r;if(a)$("#"+a).addClass("error"),$("#"+a+"-help-text").text(n).removeClass("d-none"),"budget_type"!==o&&"milerate_subtype"!==o&&"taxi_subtype"!==o&&"biketaxi_subtype"!==o||($("#"+o).addClass("error"),$("#"+o+"-help-text").text(n).removeClass("d-none")),$("#toggle-error-message").length&&0===e&&("milerate_subtype"===o||"taxi_subtype"===o||"biketaxi_subtype"===o?$("html, body").animate({scrollTop:$("#"+o+"-help-text").offset().top},1e3):$("html, body").animate({scrollTop:$("#"+a).offset().top},1e3));else{var s=$('[name="'+o+'[]"]').parents(".checkbox-group").attr("id");$("#"+s+"-help-text").text(n).removeClass("d-none")}e++}}}function l(t,e){i();var o="<h5>"+Translator.translate("utility.calling_system_administrator")+"</h5>";o+="<strong>"+Translator.translate("utility.error_url")+"</strong> "+e+"<br>",o+="<strong>"+Translator.translate("utility.error_status_code")+"</strong> "+t.status+"<br>",n(o+="<strong>"+Translator.translate("utility.error_status_text")+"</strong> "+t.statusText+"<br>")}function c(t,e){t.statusText=Translator.translate("utility.json_response_error"),l(t,e)}function u(e,o){switch(o.status){case 422:case 429:s(o.responseJSON);break;case 200:if(o.hasOwnProperty("responseJSON")){var r=o.responseJSON;!0===r.success?r.hasOwnProperty("message")?(t.on("hidden.bs.modal",(function(){r.redirectedUrl?location.href=r.redirectedUrl:e.trigger("reset")})),a(r.message)):r.redirectedUrl&&(location.href=r.redirectedUrl):n(r.message)}else c(o,e.attr("action"));break;default:o.hasOwnProperty("responseJSON")&&o.responseJSON.hasOwnProperty("message")?n(o.responseJSON.message):l(o,e.attr("action"))}}function p(t,e,o){"function"==typeof o?o.apply(this,[t,e]):u(t,e)}function f(t){return"GET"===t.attr("method")?t.serialize():new FormData(t.get(0))}return{submitForm:function(t,e){$.ajax({url:t.attr("action"),method:t.attr("method"),data:f(t),cache:!1,contentType:!1,processData:!1,success:function(o,r,a){p(t,a,e)},error:function(o){p(t,o,e)}})},displaySuccessMessageBox:a,displayErrorMessageBox:n,displayInvalidInputs:s,displayUnknownError:l,displayJsonResponseError:c,clearErrors:i,ResultBoxSelector:t,takeSubmitAction:u,runCallbackFunction:p,getFormData:f}}(jQuery),LoadMore=(jQuery,{initialize:function(){var t=1;$(document).on("click","#loadMore",(function(){Utility.clearErrors(),t=parseInt(t+1);var e=$(this).attr("data-url")+"?page="+t;console.log(["loadmore",e,t]),$.ajax({url:e,method:"GET",cache:!1,contentType:!1,processData:!1,success:function(t){t.data?$("#content-list-box").append(t.data):($("#loadMore").hide(),$("#loadmoreBox").css("display","none"))}})}))}}),PasswordToggle=(jQuery,{initialize:function(){$("#password-field").click((function(){$(".fa-eye").length?($("#password-field").html(""),$("#password-field").html('<i class="fa fa-eye-slash"></i>'),$("#password").attr("type","text")):($("#password-field").html(""),$("#password-field").html('<i class="fa fa-eye"></i>'),$("#password").attr("type","password"))}))}}),SearchBox=(jQuery,{initialize:function(){function t(t){var e=$("#projectSelect").val(),o=$("#propertySelect").val(),r=$("#unitSelect").val(),a=$("#locationSelect").val();console.log(["search",e,o,r,a]),$.ajax({url:"search",method:"POST",data:"project="+e+"&type="+o+"&unit="+r+"&location="+a,headers:{"X-CSRF-TOKEN":$('input[name="csrf-token"]').attr("content")},success:function(t,r,n){console.log(t);var i=JSON.parse("["+t+"]");console.log(i),$("#projectSelect").empty(),$("#unitSelect").empty(),$("#locationSelect").empty(),$("#propertySelect").empty(),$("#projectSelect").append('<option value="all">Select Project</option>'),$.each(i[0].project,(function(t,e){$("#projectSelect").append($("<option >",{value:e.slug,text:e.title}))})),$("#projectSelect option[value="+e+"]").prop("selected",!0),$.each(i[0].unitType,(function(t,e){$("#unitSelect").append($("<option>",{value:e.Unit_type_name_English,text:e.Unit_type_name_English}))})),$("#locationSelect").append('<option value="all">Select Project</option>'),$.each(i[0].location,(function(t,e){$("#locationSelect").append($("<option>",{value:e,text:e,options:e===a?"selected":""}))})),$("#locationSelect option[value="+a+"]").prop("selected",!0),$("#propertySelect").append('<option value="all">Select Project</option>'),$.each(i[0].projectType,(function(t,e){$("#propertySelect").append($("<option>",{value:e,text:e,options:e===o?"selected":""}))})),$("#propertySelect option[value="+o+"]").prop("selected",!0)}})}$("#projectSelect").on("change",(function(){t()})),$("#propertySelect").on("change",(function(){t()})),$("#locationSelect").on("change",(function(){t()})),$(".search-button").on("click",(function(){var t=$("#projectSelect").val(),e=$("#propertySelect").val(),o=$("#unitSelect").val(),r="/"+t+"/"+e+"/"+$("#locationSelect").val()+"/"+o+"/"+$("#priceSelect").val();window.location.href=r}))}}),Gallery=(jQuery,{initialize:function(){var t=$("#floorGallery"),e=$("#unitGallery");function o(t){$(".floorGallery img").hide(),$(".floorGallery #"+t).fadeIn(),$(".download_floor").attr("href",$("#"+t).attr("src"))}function r(t){$(".unitGallery img").hide(),$(".unitGallery #"+t).fadeIn(),$(".download_unit").attr("href",$("#"+t).attr("src"))}o(t.val()),r(e.val()),t.on("change",(function(){o(this.value)})),e.on("change",(function(){r(this.value)}))}});$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),$(document).ready((function(){LoadMore.initialize(),Search.initialize(),Confirmation.initialize(),Form.initialize(),PasswordToggle.initialize(),SearchBox.initialize(),Gallery.initialize()}));
